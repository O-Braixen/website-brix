<!--
  | Website designed by JstnLT (https://jstnlt.my.id)
  | This project is open source: https://github.com/JastinXyz/discord-bot-landing-page-web
-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{ guild.name }} - Brix The Braixen</title>
<meta name="description" content="Brix √© seu amigo raposa no Discord, com uma personalidade √∫nica e cheia de charme. Ele oferece recursos de administra√ß√£o, divers√£o, economia e intelig√™ncia artificial para transformar seu servidor em uma experi√™ncia inesquec√≠vel.">
<link rel="icon" href="/assets/img/BH_Braix.png" type="image/png">
<link rel="stylesheet" href="/assets/css/bulma.min.css" />
<link rel="stylesheet" href="/assets/css/style.css" />
<link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
<link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/scale.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
  integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>



<style>
  .config-section {
    display: none;
  }
  .config-section.is-active {
    display: block;
  }
</style>


<script src="/assets/js/jquery-3.6.0.js"></script>
</head>
<body>
  <script>
    fetch("/api/status")
      .then(res => res.json())
      .then(data => {
        document.getElementById("nome_completo").innerText = data.nome_completo;
      });
  </script>
<!-- Back To Top Start -->
<a id="backtotop" data-tippy-content="Voltar ao topo.">
  <i class="fa-solid fa-angle-up has-text-white fa-2xl mt-5"></i>
</a>
<!-- Back To Top End -->

<!-- Navbar Start -->
<nav
  class="navbar is-fixed-top"
  role="navigation"
  aria-label="main navigation"
>
<div class="navbar-brand ml-10">
  <a class="navbar-item " href="/">
    <img  src="/assets/img/brixfront.png"/></img>
    <strong>Brix The Braixen</span></strong>

  </a>

  <a
    role="button"
    class="navbar-burger has-text-white"
    data-target="navMenu"
    aria-label="menu"
    aria-expanded="false"
  >
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
</div>

<div id="navbarBasicExample" class="navbar-menu">
  <div class="navbar-start">
    <a href="/" class="navbar-item is-tab">
      Inicio
    </a>
    <a href="tos" class="navbar-item is-tab">
      Termos
    </a>

    <a href="/comandos" class="navbar-item is-tab">
      Comandos
    </a>
    
    <a href="/loja" class="navbar-item is-tab">
      Loja Di√°ria
    </a>
    <!-- 
    <a href="premium" class="navbar-item is-tab">
      Premium
    </a>
    -->
  </div>

  <div class="navbar-end">
    <a href="stats" class="navbar-item is-tab">
        <i class="fa-solid fa-chart-line"></i>
      </a>
    <a href="discord" class="navbar-item is-tab" target="_blank">
      <i class="fa-brands fa-discord"></i>
    </a>
    <a href="vote" class="navbar-item is-tab" target="_blank">
      <i class="fa-solid fa-check-to-slot"></i>
    </a>
    <a href="github" class="navbar-item is-tab " target="_blank">
      <i class="fa-brands fa-github"></i>
    </a>
        



    <div class="navbar-item" id="user-dropdown">
      {% if session.user %}
        <a class="navbar-link is-flex is-align-items-center" id="user-dropdown-toggle" style="cursor: pointer;">
          <figure class="image is-32x32 mr-2">
            <img class="is-rounded" src="https://cdn.discordapp.com/avatars/{{ session.user.id }}/{{ session.user.avatar }}.png?size=1024" alt="Avatar">
          </figure>
          {{ session.user.username }}
        </a>

        <!-- Tira is-flex daqui -->
        <div class="user-dropdown navbar-menu" id="user-dropdown-menu">
          <a class="navbar-item is-tab" href="/dashboard">
            <i class="fa-solid fa-table-columns mr-2"></i> Dashboard
          </a>
          <a class="navbar-item is-tab" href="/logout">
            <i class="fa-solid fa-right-from-bracket mr-2"></i> Sair
          </a>
        </div>
      {% else %}
        <div class="buttons mt-2">
          <a href="/login" class="button is-blurple">
            <strong><i class="fa-solid fa-right-to-bracket mr-2"></i> Login</strong>
          </a>
        </div>
      {% endif %}
    </div>

 



    <i class="ml-12"></i>
    </div>
  </div>
</nav>
<!-- Navbar End -->





<!-- Hero Section do Servidor -->
<section class="hero bg-base is-fullheight">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column mr-6 mt-12 ml-10" data-aos="fade-up">
          <p class="title msgbrix has-text-weight-bold">
            Configurando seu servidor <br><span class="mt-20 blurple">{{ guild.name }}!</span>
          </p>
          <p class="subtitle subtexto is-size-6 mt-3">
            {{ guild.description or 'Uma comunidade cheia de carisma e configura√ß√µes para fazer, at√© descri√ß√£o precisa ser adicionada ~kyu.' }}
          </p>
          <div class="buttons">
            <a href="#configsserver" class="button is-info is-medium">
              <strong><i class="fa-solid fa-gear"></i> Configurar Servidor</strong>
            </a>
            <a href="/dashboard" class="button is-primary is-medium is-outlined">
              <strong><i class="fa-solid fa-table-columns"></i> Voltar a Dashboard</strong>
            </a>
          </div>
        </div>
        <div class="column image" data-aos="fade-left">

          {% if guild.icon %}
          <img class=" has-image-centered vert-move item-image is-rounded"
            src="https://cdn.discordapp.com/icons/{{ guild.id }}/{{ guild.icon }}.png?size=1024"
            alt="{{ guild.name }}"
            style="width: 40rem" />
          {% else %}
          <div class="has-background-grey-lighter has-text-black is-flex is-justify-content-center is-align-items-center has-image-centered vert-move item-image is-rounded"
              style="width: 20rem; height: 20rem; line-height: 20rem; font-size: 2rem; font-weight: bold; border-radius: 50%">
            {{ guild.name[0] }}
          </div>
          {% endif %}
          
        </div>
      </div>
    </div>
  </div>
  <div class="has-text-centered" data-tippy-content="Scroll Down">
    <a href="#configsserver"
      ><i
        class="fa-solid fa-circle-chevron-down fa-lg vert-move2 blurple"
      ></i
    ></a>
  </div>
</section>
<!-- Hero Section End -->








<!-- Hero Waves Start -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
  <path
    fill="#4b4b4a"
    fill-opacity="1"
    d="M0,288L24,261.3C48,235,96,181,144,154.7C192,128,240,128,288,149.3C336,171,384,213,432,202.7C480,192,528,128,576,133.3C624,139,672,213,720,213.3C768,213,816,139,864,101.3C912,64,960,64,1008,106.7C1056,149,1104,235,1152,240C1200,245,1248,171,1296,144C1344,117,1392,139,1416,149.3L1440,160L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"
  ></path>
</svg>
<!-- Hero Waves End -->



<!-- CONTE√öDO -->
<section id="configsserver" class="section mt-6">
  <div class="has-text-centered">
    <h1 class="title lined">Configura√ß√µes do seu servidor</h1>
    <div class="line line-center blurple"></div>
  </div>
  




<!-- Layout com menu lateral -->
<section class="section">
  <div class="container">
    <div class="columns">

      <!-- Menu lateral -->
      <div class="column is-one-quarter">
        <aside class="menu">
          <p class="menu-label">Configura√ß√µes</p>
          <ul class="menu-list">
            <li><a href="#aniversario" data-target="aniversario" class="menu-link is-active">Anivers√°rio</a></li>
            <li><a href="#autophox" data-target="autophox" class="menu-link">Autophox</a></li>
            <li><a href="#boasvindas" data-target="boasvindas" class="menu-link">Boas-vindas</a></li>
            <li><a href="#bump" data-target="bump" class="menu-link">Mensagem de Bump</a></li>
            <li><a href="#lojacores" data-target="lojacores" class="menu-link">Loja de Cores</a></li>
            <li><a href="#pokeday" data-target="pokeday" class="menu-link">Pok√©day</a></li>
            <li><a href="#trocas-poke" data-target="trocas-poke" class="menu-link">Trocas Pok√©mon</a></li>
            <li><a href="#seguranca" data-target="seguranca" class="menu-link">Brix Seguran√ßa</a></li>
            <li><a href="#servidortag" data-target="servidortag" class="menu-link">Servidor Tag</a></li>
            <li><a href="#viploja" data-target="viploja" class="menu-link">Vip Loja</a></li>
            {% if owner and premium %}
              <li><a href="#customizar" data-target="customizar" class="menu-link">Perfil Personalizado</a></li>
            {% endif %}

          </ul>
        </aside>
      </div>

      <!-- Painel de configura√ß√£o -->
      <div class="column">
        <form method="POST" action="/dashboard/save-guild?guild={{ guild.id }}">
          <input type="hidden" name="guild_id" value="{{ guild.id }}">
          <input type="hidden" id="lista-itens-loja-html" name="lista-itens-loja-html">

          <div id="aniversario" class="box config-section is-active">
            <h3 class="title is-4">üéÇ - Notifica√ß√µes de Anivers√°rio</h3>
            <p class="subtitle is-size-6">Notifique em sua comunidade sempre que tiver um aniversariante no servidor (posta as 8h da manh√£ do Hor√°rio de Bras√≠lia).</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_aniversario" {% if retbanco.aniversario%}checked{% endif %}>
              Ativar Modulo de Anivers√°rio
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>
          

          <div class="field">
            <label class="label">Canal de Notifica√ß√£o</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="canal_aniversario">
                  {% for canal in text_channels %}
                    <option value="{{ canal.id }}" {% if retbanco.aniversario and retbanco.aniversario.canal == canal.id %}selected{% endif %} >#{{ canal.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Selecione um canal para onde ser√° postado o aviso.</p>
          </div>

          <div class="field">
            <label class="label">Cargo a ser mencionado</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cargo_ping_aniversario">
                  {% for cargo in guild.roles %}
                    <option value="{{ cargo.id }}" {% if retbanco.aniversario and retbanco.aniversario.cargo == cargo.id %}selected{% endif %} >{{ cargo.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Indique um cargo para pingar sobre o aviso.</p>
          </div>

          <div class="field">
            <label class="label">Cargo Tempor√°rio</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cargo_temp_aniversario">
                  <option value="">Nenhum</option>
                  {% for cargo in guild.roles %}
                    <option value="{{ cargo.id }}" {% if retbanco.aniversario and retbanco.aniversario.destaque == cargo.id %}selected{% endif %}  >{{ cargo.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Indique um cargo para ser entregue aos aniversariantes no dia (temporario 24h).</p>
          </div>
        </div>

        <div id="boasvindas" class="box config-section">
            <h3 class="title is-4">üëã - Mensagem de Boas-vindas</h3>
            <p class="subtitle is-size-6">Mensagem que d√° as boas vindas aos novos membros.</p>

            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="ativar_boasvindas" {% if retbanco.boasvindas%}checked{% endif %} >
                Ativar Modulo de boas vindas
              </label>
              <p class="help">Ative para validar as configura√ß√µes.</p>
            </div>

          <div class="field">
            <label class="label">Canal</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="canal_boasvindas">
                  {% for canal in text_channels %}
                    <option value="{{ canal.id }}" {% if retbanco.boasvindas and retbanco.boasvindas.canal == canal.id %}selected{% endif %}  >#{{ canal.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Canal onde a mensagem deve ser enviada.</p>
          </div>

          <div class="field">
            <label class="label">Mensagem</label>
            <div class="control">
              <textarea class="textarea" name="mensagem_boasvindas">{{ retbanco["boasvindas"]["mensagem"] if "boasvindas" in retbanco and "mensagem" in retbanco["boasvindas"] else "" }}</textarea>
            </div>
            <p class="help">Escreva como deseja que a mensagem seja, Variaveis disponiveis: @user , guild , guildsize, userid.</p>
          </div>

          <div class="field">
            <label class="label">Deletar ap√≥s (segundos)</label>
            <div class="control">
              <input type="number" class="input" name="boasvindas_deletar" value="{{ retbanco.get('boasvindas', {}).get('deletar', 0) }}"  min="0">
            </div>
            <p class="help">deletar mensagem em quantos segundos?, passe 0 para n√£o deletar</p>
          </div>
        </div>

        <div id="autophox" class="box config-section">
            <h3 class="title is-4">ü¶ä - Autophox</h3>
            <p class="subtitle is-size-6">Receba a cada hora uma arte diferente de Braixen, Fennekin ou Delphox eu uma postagem automatizada.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_autophox" {% if retbanco.autophox%}checked{% endif %}>
                Ativar Modulo de Autophox
            </label>
              <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field">
            <label class="label">Canal Autophox</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="canal_autophox">
                  {% for canal in text_channels %}
                    <option value="{{ canal.id }}" {% if retbanco.autophox and retbanco.autophox == canal.id %}selected{% endif %} >#{{ canal.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Selecione um canal onde ser√° postado as imagens.</p>
          </div>
        </div>
        

        <div id="lojacores" class="box config-section">
          <h3 class="title is-4">üé® - Loja de Cores</h3>
          <p class="subtitle is-size-6">Permite que os usu√°rios comprem cargos tematizados com cores personalizadas dentro da sua comunidade.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_loja_cores" {% if retbanco.itensloja %}checked{% endif %}>
              Ativar M√≥dulo de loja de cores
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field is-flex is-align-items-center">
            <div class="control mr-4">
              <label class="label">URL da arte da loja</label>
              <input class="input" style="max-width: 400px;" id="url_arte_loja" type="text" name="link_arte_loja"
                    placeholder="https://exemplo.com/imagem.png"
                    value="{{ retbanco.get('lojabanner', '') }}"
                    oninput="document.getElementById('preview_arte_loja').src = this.value">
              <p class="help">Imagem para loja de cores, se n√£o passar nada usar√° do sistema.</p>
            </div>
            <figure class="mt-2" style="max-width: 200px;">
              <img id="preview_arte_loja" src="{{ retbanco.get('lojabanner', '/assets/img/cores.png') }}" alt="Arte da loja" style="width: 100%;">
            </figure>
          </div>

          <div class="field">
            <label class="label">Adicionar item √† loja</label>
            <div class="is-flex">
              <div class="select mr-2">
                <select id="select_cargo_loja">
                  {% for cargo in guild["roles"] if cargo["color"] != 0 %}
                    <option value="{{ cargo['id'] }}" data-cor="#{{ '%06x' % cargo.get('color', 0) }}">{{ cargo['name'] }}</option>

                  {% endfor %}
                </select>

              </div>
              <!-- √çcone moeda -->
              <img src="/assets/img/icon_braixencoin.png"
                  style="height: 1.8em; vertical-align: middle; margin-right: 12px;">

              <input class="input mr-2" type="number" id="valor_cargo_loja" placeholder="Valor em Braixencoin"  style="max-width: 100px;">
              <button class="button is-primary is-medium is-outlined" onclick="adicionarItemLoja(event)" id="btn_add_loja" type="button">Adicionar</button>
            </div>
            <p class="help">Cadastre um novo item com cargo e valor (m√°x. 25).</p>
          </div>

          <div class="field">
            <label class="label">Itens j√° cadastrados</label>
            <div class="box" id="lista-itens-loja">
              {% if retbanco.itensloja %}
                {% for cargo_id, valor in retbanco.itensloja.items() %}
                  {% set cargo = guild["roles"] | selectattr("id", "equalto", cargo_id | int) | list | first %}
                  {% set nome = cargo["name"] if cargo else 'Cargo desconhecido' %}
                  {% set cor = "#%06x" % cargo["color"] if cargo and cargo["color"] else "#000000" %}
                  <div class="is-flex is-justify-content-space-between is-align-items-center mb-2" data-id="{{ cargo_id }}">
                    <span class="is-flex is-align-items-center">
                      
                      <span class="color-dot" style="background-color: {{ cor }}; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 6px;"></span>
                      <strong>{{ nome }} </strong>
                      ‚Äî 
                      <img src="/assets/img/icon_braixencoin.png" style="height: 1em; vertical-align: middle; margin: 0 4px;">
                      {{ valor }}
                    </span>
                    <button class="button is-small is-danger" onclick="removerItemLoja(this)">Remover</button>
                  </div>
                {% endfor %}
              {% else %}
                <p id="msg-sem-itens">Nenhum item cadastrado.</p>
              {% endif %}
            </div>
            <p class="help">Itens atualmente dispon√≠veis na loja.</p>
          </div>

        </div>











        <div id="pokeday" class="box config-section">
          <h3 class="title is-4">üìÖ - Pok√©day</h3>
          <p class="subtitle is-size-6">Ativa notifica√ß√µes de Pok√©mon do dia, esse sistema posta diariamente qual √© o respectivo pok√©mon do dia.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_pokeday" {% if retbanco.pokeday%}checked{% endif %} >
              Ativar Modulo de Pok√©day
            </label>
              <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field">
            <label class="label">Canal para mensagens do Pok√©day</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="canal_pokeday">
                  {% for canal in text_channels %}
                    <option value="{{ canal.id }}" {% if retbanco.pokeday and retbanco.pokeday.canal == canal.id %}selected{% endif %} >#{{ canal.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Canal onde as mensagens do Pok√©day ser√£o postadas.</p>
          </div>

          <div class="field">
            <label class="label">Cargo (opcional)</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cargo_pokeday">
                  <option value="">Nenhum</option>
                  {% for cargo in guild.roles %}
                    <option value="{{ cargo.id }}" {% if retbanco.pokeday and retbanco.pokeday.ping == cargo.id %}selected{% endif %} >{{ cargo.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Cargo que ser√° mencionado nas notifica√ß√µes (opcional).</p>
          </div>
        </div>





        <div id="bump" class="box config-section">
            <h3 class="title is-4">üì¢ - Mensagem de Bump</h3>
            <p class="subtitle is-size-6">Mensagem para notificar quando pode se dar bump no servidor novamente.</p>

            <div class="field">
              <label class="checkbox">
                <input type="checkbox" name="ativar_bump" {% if "bump-message" in retbanco %}checked{% endif %} >
                Ativar Modulo de Bump
              </label>
              <p class="help">Ative para validar as configura√ß√µes.</p>
            </div>

          <div class="field">
            <label class="label">Mensagem personalizada</label>
            <div class="control">
              <textarea class="textarea" name="mensagem_bump">{{ retbanco.get('bump-message', '') }}</textarea>
            </div>
            <p class="help">Defina uma mensagem que ser√° enviada pelo bot na comunidade, pode incluir men√ß√£o de cargos.</p>
          </div>
        </div>
        












        <div id="trocas-poke" class="box config-section">
          <h3 class="title is-4">üîÑ - Trocas Pok√©mon</h3>
          <p class="subtitle is-size-6">Ativa notifica√ß√µes de novos pedidos de troca de Pok√©mon.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_trocas" {% if retbanco.trocas_aviso %}checked{% endif %} >
              Ativar M√≥dulo de Avisos de Trocas
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field">
            <label class="label">Canal para avisos de novas Trocas</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="canal_trocas">
                  {% for canal in text_channels %}
                    <option value="{{ canal.id }}" {% if retbanco.trocas_aviso and retbanco.trocas_aviso.canal == canal.id %}selected{% endif %}>#{{ canal.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Canal onde as mensagens de novos pedidos de troca ser√£o postadas.</p>
          </div>

          <div class="field">
            <label class="label">Cargo (opcional)</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cargo_trocas">
                  <option value="">Nenhum</option>
                  {% for cargo in guild.roles %}
                    <option value="{{ cargo.id }}" {% if retbanco.trocas_aviso and retbanco.trocas_aviso.cargo == cargo.id %}selected{% endif %}>{{ cargo.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Cargo que ser√° mencionado nas notifica√ß√µes (opcional).</p>
          </div>
        </div>







        




        <div id="seguranca" class="box config-section">
          <h3 class="title is-4">üîí - Seguran√ßa do Servidor</h3>
          <p class="subtitle is-size-6">Ative seguran√ßa adicional em seu servidor.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_seguranca" {% if retbanco.seguranca %}checked{% endif %}>
              Ativar Seguran√ßa do Servidor
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>
          <p class="subtitle is-size-6">Sistema Anti-Alt dedicado para proteger sua comundade da entrada de contas recem criadas.</p>
          <div class="field is-grouped">
            <div class="control">
              <label class="label">Tempo m√≠nimo de cria√ß√£o da conta</label>
              {% set tempo_segundos = retbanco.get('seguranca', {}).get('antialt', {}).get('tempo', 0) %}
              {% set tempo_minutos = tempo_segundos // 60 %}
              {% set tempo_horas = tempo_segundos // 3600 %}
              {% set tempo_dias = tempo_segundos // 86400 %}

              <input class="input" type="number" min="0" name="tempo_antialt" 
                    value="{% if tempo_segundos >= 86400 %}{{ tempo_dias }}{% elif tempo_segundos >= 3600 %}{{ tempo_horas }}{% else %}{{ tempo_minutos }}{% endif %}">

              <p class="help">Digite apenas o n√∫mero.</p>
            </div>
            <div class="control">
              <label class="label">Unidade</label>
              <div class="select">
                <select name="unidade_antialt">
                  <option value="minutos" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('tempo', 0) < 3600 %}selected{% endif %}>Minutos</option>
                  <option value="horas" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('tempo', 0) >= 3600 and retbanco.get('seguranca', {}).get('antialt', {}).get('tempo', 0) < 86400 %}selected{% endif %}>Horas</option>
                  <option value="dias" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('tempo', 0) >= 86400 %}selected{% endif %}>Dias</option>

                </select>
              </div>
              <p class="help">Selecione a unidade de tempo.</p>
            </div>
          </div>

          <div class="field">
            <label class="label">A√ß√£o ao detectar uma conta nova oque devo fazer?</label>
            <div class="select">
              <select name="acao_antialt">
                <option value="kick" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('acao', '') == 'kick' %}selected{% endif %}>Kick</option>
                <option value="ban" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('acao', '') == 'ban' %}selected{% endif %}>Ban</option>

              </select>
            </div>
          </div>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="notificar_antialt" {% if retbanco.get('seguranca', {}).get('antialt', {}).get('notificacao', False) %}checked{% endif %}>
              Enviar aviso em DM ao usu√°rio
            </label>
            <p class="help">O bot tentar√° avisar o usu√°rio antes de aplicar a puni√ß√£o.</p>
          </div>
        </div>







        
        




        <div id="servidortag" class="box config-section">
          <h3 class="title is-4">‚≠ê - Servidor Tag</h3>
          <p class="subtitle is-size-6">
            Define um cargo que ser√° atribu√≠do automaticamente aos membros que usarem a tag do seu servidor.
          </p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_servidor_tag" {% if retbanco.tag_server %}checked{% endif %}>
              Ativar m√≥dulo de Servidor Tag
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field">
            <label class="label">Cargo a ser atribu√≠do</label>
            <div class="control">
              <div class="select is-fullwidth">
                <select name="cargo_servidor_tag" required>
                  {% for cargo in guild.roles %}
                    {% if cargo.name != "@everyone" %}
                      <option value="{{ cargo.id }}" {% if retbanco.tag_server and retbanco.tag_server.cargo == cargo.id %}selected{% endif %}>
                        {{ cargo.name }}
                      </option>
                    {% endif %}
                  {% endfor %}
                </select>
              </div>
            </div>
            <p class="help">Escolha o cargo que ser√° entregue aos membros (obrigat√≥rio).</p>
          </div>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="notificar_servidor_tag" {% if retbanco.get('tag_server', {}).get('aviso_dm', False) %}checked{% endif %}>
              Enviar aviso em DM ao usu√°rio
            </label>
            <p class="help">O bot tentar√° avisar o usu√°rio ao aplicar o cargo.</p>
          </div>
        </div>






        



        


        <div id="viploja" class="box config-section">
          <h3 class="title is-4">üíé - Loja de Cargos Vip</h3>
          <p class="subtitle is-size-6">Permite que os usu√°rios comprem cargos vip por per√≠odo de assinatura dentro da sua comunidade.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_loja_vip" {% if retbanco.lojavip %}checked{% endif %}>
              Ativar M√≥dulo de cargos vip
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <div class="field is-flex is-align-items-center">
            <div class="control mr-4">
              <label class="label">URL da arte da loja</label>
              <input class="input" style="max-width: 400px;" id="url_arte_loja_vip" type="text" name="link_arte_loja_vip"
                    placeholder="https://exemplo.com/imagem.png"
                    value="{{ retbanco.get('lojavipbanner', '') }}"
                    oninput="document.getElementById('preview_arte_loja_vip').src = this.value">
              <p class="help">Imagem para loja de cargos vip, se n√£o passar nada usar√° do sistema.</p>
            </div>
            <figure class="mt-2" style="max-width: 200px;">
              <img id="preview_arte_loja_vip" src="{{ retbanco.get('lojavipbanner', '/assets/img/vip.png') }}" alt="Arte da loja" style="width: 100%;">
            </figure>
          </div>

          <div class="field">
            <label class="label">Adicionar item √† loja</label>

            <div class="is-flex is-align-items-center is-flex-wrap-wrap mb-2">
              <div class="select mr-2">
                <select id="select_cargo_loja_vip">
                  {% for cargo in guild["roles"] if not cargo["managed"] and cargo["name"] != "@everyone" %}
                    <option value="{{ cargo['id'] }}" data-cor="#{{ '%06x' % cargo.get('color', 0) }}">{{ cargo['name'] }}</option>
                  {% endfor %}
                </select>
              </div>

              <img src="/assets/img/icon_braixencoin.png" style="height: 1.8em; vertical-align: middle; margin-right: 12px;">
              <input class="input mr-2" type="number" id="valor_cargo_loja_vip" placeholder="Valor em Braixencoin" style="max-width: 100px;">
              <input class="input mr-2" type="number" id="tempo_valor_loja_vip" placeholder="Tempo" style="max-width: 100px;">

              <div class="select mr-2">
                <select id="tempo_tipo_loja_vip">
                  <option value="minutos">Minutos</option>
                  <option value="horas">Horas</option>
                  <option value="dias">Dias</option>
                  <option value="perm">Permanente</option>
                </select>
              </div>

              <button class="button is-primary is-medium is-outlined" onclick="adicionarItemLojaVip(event)" id="btn_add_loja_vip" type="button">Adicionar</button>
            </div>

            <p class="help">Cadastre um novo item com cargo, valor e tempo (m√°x. 25).</p>
          </div>

          <div class="field">
            <label class="label">Itens j√° cadastrados</label>

            <input type="hidden" name="lista-itens-loja-vip-html" id="lista-itens-loja-vip-html">

            <div class="box" id="lista-itens-loja-vip">
              {% if retbanco.lojavip %}
                {% for id_item, dados in retbanco.lojavip.items() %}
                  {% set cargo = guild["roles"] | selectattr("id", "equalto", dados.cargo | int) | list | first %}
                  {% set nome = cargo["name"] if cargo else 'Cargo desconhecido' %}
                  {% set cor = "#%06x" % cargo["color"] if cargo and cargo["color"] else "#000000" %}
                  {% if dados.tempo == "perm" %}
                    {% set tempo_legivel = "Permanente" %}
                  {% else %}
                    {% set tempo_segundos = dados.tempo | int %}
                    {# reutilize a mesma l√≥gica do servidor, mas aqui apenas exibimos leg√≠vel #}
                    {% set tempo_dias = tempo_segundos // 86400 %}
                    {% set tempo_horas = (tempo_segundos % 86400) // 3600 %}
                    {% set tempo_minutos = (tempo_segundos % 3600) // 60 %}
                    {% set tempo_segundos_rest = tempo_segundos % 60 %}
                    {% set partes = [] %}
                    {% if tempo_dias > 0 %}{% set _ = partes.append(tempo_dias ~ "d") %}{% endif %}
                    {% if tempo_horas > 0 %}{% set _ = partes.append(tempo_horas ~ "h") %}{% endif %}
                    {% if tempo_minutos > 0 %}{% set _ = partes.append(tempo_minutos ~ "m") %}{% endif %}
                    {% if tempo_segundos_rest > 0 %}{% set _ = partes.append(tempo_segundos_rest ~ "s") %}{% endif %}
                    {% set tempo_legivel = " ".join(partes) if partes else "0s" %}
                  {% endif %}

                  <div class="is-flex is-justify-content-space-between is-align-items-center mb-2"
                      data-id="{{ id_item }}"
                      data-cargo="{{ dados.cargo }}"
                      data-valor="{{ dados.valor }}"
                      data-tempo="{{ dados.tempo }}"
                      data-registro="{{ dados.registrado if dados.registrado is defined else user['id'] }}">
                    <span class="is-flex is-align-items-center">
                      <span class="color-dot" style="background-color: {{ cor }}; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 6px;"></span>
                      <strong>{{ nome }}</strong> ‚Äî
                      <img src="/assets/img/icon_braixencoin.png" style="height: 1em; vertical-align: middle; margin: 0 4px;">
                      {{ dados.valor }} ‚Äî ‚è± {{ tempo_legivel }}
                    </span>
                    <button class="button is-small is-danger" onclick="removerItemLojaVip(this)">Remover</button>
                  </div>
                {% endfor %}
              {% else %}
                <p id="msg-sem-itens-vip">Nenhum item cadastrado.</p>
              {% endif %}
            </div>

            <p class="help">Itens atualmente dispon√≠veis na loja.</p>
          </div>
        </div>

        


        













        <div id="customizar" class="box config-section">
          <h3 class="title is-4">ü¶ä - Personaliza√ß√£o do Brix</h3>
          <p class="subtitle is-size-6">Mude a apar√™ncia de Brix em sua comunidade, A altera√ß√£o pode demorar alguns minutos para acontecer.</p>

          <div class="field">
            <label class="checkbox">
              <input type="checkbox" name="ativar_customizar" {% if retbanco.custom %}checked{% endif %}>
              Ativar M√≥dulo de Personaliza√ß√£o
            </label>
            <p class="help">Ative para validar as configura√ß√µes.</p>
          </div>

          <!-- Linha Avatar + Nome -->
          <div class="columns is-vcentered">

           <!-- Normaliza√ß√£o antecipada para evitar "None" virar string -->
            {% set avatar = (
                retbanco.custom.avatar
                if retbanco.custom and retbanco.custom.avatar not in [None, 'None', '']
                else None
            ) %}

            {% set banner = (
                retbanco.custom.banner
                if retbanco.custom and retbanco.custom.banner not in [None, 'None', '']
                else None
            ) %}

            <!-- Avatar -->
            <div class="column is-3">
              <div class="preview-box">
                <div class="preview-title">Avatar</div>

                <img id="preview-avatar"
                  src="{% if avatar %}
                          /cdn/{{ avatar }}
                      {% elif bot_default.avatar %}
                          {{ bot_default.avatar }}
                      {% else %}
                          /assets/default_avatar.png
                      {% endif %}"
                  class="preview-avatar">
              </div>
            </div>

            <!-- Banner -->
            <div class="column">
              <div class="preview-box">
                <div class="preview-title">Banner</div>

                <img id="preview-banner"
                  src="{% if banner %}
                          /cdn/{{ banner }}
                      {% elif bot_default.banner %}
                          {{ bot_default.banner }}
                      {% else %}
                          /assets/default_banner.png
                      {% endif %}"
                  class="preview-banner">
              </div>
            </div>

          </div>

          <!-- Nome + Bio abaixo -->
          <div class="field mt-4">
            <label class="label">Nome</label>
            <input class="input" type="text" name="brix_nome"
                placeholder="{{ bot_default.nome }}"
                value="{{ retbanco.custom.nome if retbanco.custom and retbanco.custom.nome else '' }}">
          </div>

          <div class="field">
            <label class="label">Descri√ß√£o / Bio</label>
            <textarea class="textarea" name="brix_bio"
              placeholder="{{ bot_default.bio }}">{{ retbanco.custom.bio if retbanco.custom and retbanco.custom.bio else '' }}</textarea>
          </div>
          <hr>

          <!-- AVATAR -->
          <label class="label">Escolher Avatar</label>
          <div class="scroll-row" id="lista-avatars"></div>
          <input type="hidden" name="brix_avatar" id="brix_avatar_input"
            value="{{ retbanco.custom.avatar if retbanco.custom else '' }}">

          <br>

          <!-- BANNER -->
          <label class="label">Escolher Banner</label>
          <div class="scroll-row" id="lista-banners"></div>
          <input type="hidden" name="brix_banner" id="brix_banner_input"
            value="{{ retbanco.custom.banner if retbanco.custom else '' }}">
        </div>


        <script>
          document.addEventListener("DOMContentLoaded", async () => {
              const res = await fetch("/api/status");
              const data = await res.json();

              const avatars = data.profile_avatar || {};
              const banners = data.profile_banner || {};

              const avatarList = document.getElementById("lista-avatars");
              const bannerList = document.getElementById("lista-banners");

              // --- AVATAR: op√ß√£o padr√£o ---
              criarItem( avatarList, "padrao", "{{ bot_default.avatar if bot_default.avatar else '/assets/default_avatar.png' }}", "Padr√£o", selecionarAvatar );

              Object.entries(avatars).forEach(([nome, arquivo]) => {
                  const url = `/cdn/${arquivo}`;
                  criarItem(avatarList, arquivo, url, nome, selecionarAvatar);
              });

              // --- BANNER: op√ß√£o padr√£o ---
              criarItem(
                  bannerList,
                  "padrao",
                  "{{ bot_default.banner if bot_default.banner else '/assets/default_banner.png' }}",
                  "Padr√£o",
                  selecionarBanner
              );

              Object.entries(banners).forEach(([nome, arquivo]) => {
                  const url = `/cdn/${arquivo}`;
                  criarItem(bannerList, arquivo, url, nome, selecionarBanner);
              });

              // ================================
              // ‚úÖ MARCAR SELE√á√ÉO INICIAL
              // ================================
              const avatarAtual = "{{ retbanco.custom.avatar if retbanco.custom else '' }}";
              const bannerAtual = "{{ retbanco.custom.banner if retbanco.custom else '' }}";

              // Avatar
              [...avatarList.querySelectorAll(".item-mini")].forEach(el => {
                  const img = el.querySelector("img");

                  // Se h√° avatar salvo ‚Üí marca ele
                  if (avatarAtual && img.src.includes(avatarAtual)) {
                      el.classList.add("selecionado");
                  }

                  // Se N√ÉO h√° avatar salvo ‚Üí marca o item padr√£o
                  if (!avatarAtual && el.querySelector("small").innerText === "Padr√£o") {
                      el.classList.add("selecionado");
                  }
              });

              // Banner
              [...bannerList.querySelectorAll(".item-mini")].forEach(el => {
                  const img = el.querySelector("img");

                  if (bannerAtual && img.src.includes(bannerAtual)) {
                      el.classList.add("selecionado");
                  }

                  if (!bannerAtual && el.querySelector("small").innerText === "Padr√£o") {
                      el.classList.add("selecionado");
                  }
              });
          });

          function criarItem(lista, id, url, texto, onclickFn) {
              const div = document.createElement("div");
              div.className = "item-mini";

              div.onclick = (e) => onclickFn(id === "padrao" ? "" : id, url, e);

              div.innerHTML = `
                  <img src="${url || '/assets/default_blank.png'}">
                  <small>${texto}</small>
              `;

              lista.appendChild(div);
          }

          // --- Selecionar Avatar ---
          function selecionarAvatar(id, url, e) {
              document.getElementById("brix_avatar_input").value = id;

              e.currentTarget.parentElement.querySelectorAll(".item-mini")
                .forEach(el => el.classList.remove("selecionado"));

              e.currentTarget.classList.add("selecionado");

              document.getElementById("preview-avatar").src =
                  id ? `/cdn/${id}` : "{{ bot_default.avatar if bot_default.avatar else '/assets/default_avatar.png' }}";
          }

          // --- Selecionar Banner ---
          function selecionarBanner(id, url, e) {
              document.getElementById("brix_banner_input").value = id;

              e.currentTarget.parentElement.querySelectorAll(".item-mini")
                .forEach(el => el.classList.remove("selecionado"));

              e.currentTarget.classList.add("selecionado");

              document.getElementById("preview-banner").src =
                  id ? `/cdn/${id}` : "{{ bot_default.banner if bot_default.banner else '/assets/default_banner.png' }}";
          }
          </script>










  




        <div class="field is-grouped is-justify-content-flex-end">
          <div class="control">
            <button class="button is-info is-medium " type="submit">
              <i class="fas fa-save mr-2"></i> Salvar configura√ß√µes
            </button>
          </div>
        </div>

        </form>
      </div>

    </div>
  </div>
</section>




<script> 
document.querySelector('form[action^="/dashboard/save-guild"]').addEventListener('submit', async (e) => {
  e.preventDefault(); // impede reload
  const form = e.target;
  const formData = new FormData(form);

  // envia pro servidor
  const resp = await fetch('/dashboard/save-guild', {
    method: 'POST',
    body: formData
  });

  // toca som de salvo
  const audio = new Audio('/assets/sounds/salvo.mp3');
  audio.volume = 0.4;
  audio.play().catch(()=>{}); // ignora bloqueio do navegador

  // cria imagem "Salvo!"
  const btn = form.querySelector('button[type="submit"]');
  const msg = document.createElement('img');
  msg.src = '/assets/img/salvo.png';
  msg.style.position = 'absolute';
  msg.style.top = (btn.offsetTop - 120) + 'px'; // dist√¢ncia acima do bot√£o
  msg.style.left = (btn.offsetLeft + btn.offsetWidth / 2) + 'px'; // meio do bot√£o
  msg.style.transform = 'translateX(-50%)'; // centraliza
  msg.style.width = '120px';
  msg.style.pointerEvents = 'none';
  msg.style.transition = 'opacity 0.4s ease';
  msg.style.opacity = '1';

  btn.parentElement.style.position = 'relative';
  btn.parentElement.appendChild(msg);

  // fade e remove
  setTimeout(() => msg.style.opacity = '0', 2500);
  setTimeout(() => msg.remove(), 3000);
});
</script>


 </div>
  </section>
</main>








<script>
function adicionarItemLoja(event) {
  event.preventDefault(); // impede submit
  
  const select = document.getElementById("select_cargo_loja");
  const inputValor = document.getElementById("valor_cargo_loja");
  const lista = document.getElementById("lista-itens-loja");
  const msgVazio = document.getElementById("msg-sem-itens");
  const cargoId = select.value;
  const cargoNome = select.options[select.selectedIndex].text;
  const valor = inputValor.value;

  if (!valor || valor <= 0)  return alert("Voc√™ n√£o pode passar valor 0 em Braixencoin.");
  if (lista.children.length >= 25) return alert("Voc√™ s√≥ pode registra no maximo 25 itens.");

  // üîí VERIFICA SE J√Å EXISTE CARGO COM ESSE ID
  const jaExiste = [...lista.children].some(div => div.dataset.id === cargoId);
  if (jaExiste) {
    alert("Este cargo j√° est√° na loja!");
    return;
  }

  const cor = select.options[select.selectedIndex].getAttribute('data-cor') || '#000000';

  const itemDiv = document.createElement("div");
  itemDiv.className = "is-flex is-justify-content-space-between is-align-items-center mb-2";
  itemDiv.setAttribute("data-id", cargoId);
  itemDiv.innerHTML = `
    <span class="is-flex is-align-items-center">
      <span class="color-dot" style="background-color: ${cor}; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 6px;"></span>
      <strong>${cargoNome}</strong> ‚Äî 
      <img src="/assets/img/icon_braixencoin.png" style="height: 1em; vertical-align: middle; margin: 0 4px;">
      ${valor}
    </span>
    <button class="button is-small is-danger" onclick="removerItemLoja(this)">Remover</button>
  `;

  if (msgVazio) msgVazio.remove();
  lista.appendChild(itemDiv);

  inputValor.value = "";
  limitarItensLoja();
}

function removerItemLoja(button) {
  const itemDiv = button.parentElement;
  itemDiv.remove();
  limitarItensLoja();
}

function limitarItensLoja() {
  const lista = document.getElementById("lista-itens-loja");
  const btnAdd = document.getElementById("btn_add_loja");
  btnAdd.disabled = lista.children.length >= 25;
}

 // Fun√ß√£o para preencher o campo oculto com os itens da loja
  function preencherItensLoja() {
    const listaItensLoja = document.getElementById("lista-itens-loja");
    const htmlItens = listaItensLoja.innerHTML;  // Obt√©m o HTML atual da lista de itens
    document.getElementById("lista-itens-loja-html").value = htmlItens;  // Define o valor no campo oculto
  }

  // Adicionar a chamada para preencher os itens da loja antes do submit
  document.querySelector("form").addEventListener("submit", function(event) {
    preencherItensLoja();  // Preenche o campo oculto antes de enviar o formul√°rio
  });

</script>

















<script>
(function () {
  const form = document.querySelector("form#config-form") || document.querySelector("form"); // prefira id no form: id="config-form"
  const listaEl = document.getElementById("lista-itens-loja-vip");
  const hiddenField = document.getElementById("lista-itens-loja-vip-html");

  function atualizarHiddenLojaVip() {
    hiddenField.value = listaEl.innerHTML;
  }

  function gerarTempId() {
    // id curto e quase-√∫nico para identificar itens novos no servidor
    return 'new-' + Date.now().toString(36) + Math.floor(Math.random() * 1000).toString(36);
  }

  function formatTempoLegivelFromSeconds(segundos) {
    if (segundos === 'perm' || segundos === 'Permanente') return 'Permanente';
    segundos = parseInt(segundos, 10) || 0;
    if (segundos <= 0) return '0s';
    const dias = Math.floor(segundos / 86400);
    const horas = Math.floor((segundos % 86400) / 3600);
    const minutos = Math.floor((segundos % 3600) / 60);
    const segs = segundos % 60;
    const partes = [];
    if (dias) partes.push(dias + 'd');
    if (horas) partes.push(horas + 'h');
    if (minutos) partes.push(minutos + 'm');
    if (segs) partes.push(segs + 's');
    return partes.join(' ');
  }

  function adicionarItemLojaVip(e) {
    e.preventDefault();

    const cargoSelect = document.getElementById("select_cargo_loja_vip");
    const cargoId = cargoSelect.value;
    const cargoNome = cargoSelect.options[cargoSelect.selectedIndex].text;
    const cor = cargoSelect.options[cargoSelect.selectedIndex].dataset.cor || "#000000";

    const valorInput = document.getElementById("valor_cargo_loja_vip");
    const tempoValorInput = document.getElementById("tempo_valor_loja_vip");
    const tempoTipoSelect = document.getElementById("tempo_tipo_loja_vip");

    const valor = parseInt(valorInput.value, 10);
    const tempoValor = parseInt(tempoValorInput.value, 10) || 0;
    const tempoTipo = tempoTipoSelect.value;

    if (!cargoId) return alert("Selecione um cargo.");
    if (!valor || valor <= 0) return alert("Voc√™ n√£o pode passar valor 0 em Braixencoin.");

    // conta itens reais (exclude mensagem "Nenhum item")
    const itensReais = Array.from(listaEl.children).filter(c => c.dataset && c.dataset.id);
    if (itensReais.length >= 25) return alert("Voc√™ s√≥ pode registrar no m√°ximo 25 itens.");

    // converte tempo para segundos ou "perm"
    let tempoFinal;
    if (tempoTipo === "perm" || tempoValor <= 0) {
      tempoFinal = "perm";
    } else {
      if (tempoTipo === "minutos") tempoFinal = tempoValor * 60;
      else if (tempoTipo === "horas") tempoFinal = tempoValor * 3600;
      else if (tempoTipo === "dias") tempoFinal = tempoValor * 86400;
      else tempoFinal = tempoValor; // fallback
      // limite: 5 meses (considerando 30 dias por m√™s)
      const limiteSegundos = 5 * 30 * 86400; // 5 meses
      if (tempoFinal > limiteSegundos) {
        alert("O tempo m√°ximo permitido √© de 5 meses.");
        return;
      }
    }

    const tempId = gerarTempId();
    const div = document.createElement("div");
    div.className = "is-flex is-justify-content-space-between is-align-items-center mb-2";
    div.setAttribute("data-id", tempId);
    div.setAttribute("data-tempo", tempoFinal);
    div.setAttribute("data-cargo", cargoId);
    div.setAttribute("data-valor", valor);

    const legivel = tempoFinal === "perm" ? "Permanente" : formatTempoLegivelFromSeconds(tempoFinal);

    div.innerHTML = `
      <span class="is-flex is-align-items-center">
        <span class="color-dot" style="background-color: ${cor}; width: 12px; height: 12px; border-radius: 50%; display: inline-block; margin-right: 6px;"></span>
        <strong>${cargoNome}</strong> ‚Äî
        <img src="/assets/img/icon_braixencoin.png" style="height: 1em; vertical-align: middle; margin: 0 4px;">
        ${valor} ‚Äî ‚è± ${legivel}
      </span>
      <button class="button is-small is-danger" onclick="removerItemLojaVip(this)">Remover</button>
    `;

    // Anexa
    // remove mensagem de "nenhum item"
    const msg = document.getElementById("msg-sem-itens-vip");
    if (msg) msg.remove();

    listaEl.appendChild(div);
    atualizarHiddenLojaVip();

    // limpa inputs
    valorInput.value = "";
    tempoValorInput.value = "";
    tempoTipoSelect.selectedIndex = 0;
  }

  // expose remover para onclick inline (ou troque para event delegation)
  window.removerItemLojaVip = function (btn) {
    const el = btn.parentElement;
    el.remove();
    if (!listaEl.querySelector("[data-id]")) {
      listaEl.innerHTML = '<p id="msg-sem-itens-vip">Nenhum item cadastrado.</p>';
    }
    atualizarHiddenLojaVip();
  };

  // inicializa√ß√£o
  document.addEventListener("DOMContentLoaded", atualizarHiddenLojaVip);
  if (form) form.addEventListener("submit", atualizarHiddenLojaVip);

  // expose adicionar tamb√©m se preferir bind via JS
  window.adicionarItemLojaVip = adicionarItemLojaVip;
})();
</script>


















<script>
document.addEventListener('DOMContentLoaded', () => {
  const links = document.querySelectorAll('.menu-link');
  const sections = document.querySelectorAll('.config-section');

  links.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault(); // n√£o deixa subir a p√°gina

      // remove is-active de todos os links e sections
      links.forEach(l => l.classList.remove('is-active'));
      sections.forEach(s => s.classList.remove('is-active'));

      // adiciona is-active no clicado e na se√ß√£o correspondente
      link.classList.add('is-active');
      const target = document.getElementById(link.dataset.target);
      if(target) target.classList.add('is-active');
    });
  });
});
</script>










<script>
  // Script do dropdown do menu do usuario
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("user-dropdown-toggle");
    const menu = document.getElementById("user-dropdown-menu");

    // Sempre come√ßa fechado, for√ßando o estilo
    menu.style.display = "none";

    toggle.addEventListener("click", function (e) {
      e.preventDefault();
      menu.style.display = (menu.style.display === "none") ? "block" : "none";
    });

    document.addEventListener("click", function (e) {
      if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });
  });
</script>








<!-- Footer Section Start -->
<footer class="footer bg-base">
  <div class="content has-text-centered has-text-white">
    <div class="mb-2">
      <a href="discord" class="has-text-white" target="_blank">
        <i class="fa-brands fa-discord"></i>
      </a>
      &nbsp; &nbsp;
      <a href="vote" class="has-text-white" target="_blank">
        <i class="fa-solid fa-check-to-slot"></i>
      </a>
      &nbsp; &nbsp;
      <a href="github" class="has-text-white" target="_blank">
        <i class="fa-brands fa-github"></i>
      </a>
      
    </div>

    <p>
      <span class="has-text-weight-bold">Brix The Braixen</span></span>
      <br />
      &copy; <span id="cp-year"></span> Copyright OBraixen. Todos os direitos reservados.
      <br />
      <span class="has-text-weight-bold"> Powered by <img src="https://cdn.squarecloud.app/assets/logo-without-name.png" alt="Squarecloud" style="height: 50px; vertical-align: middle;" /> Square Cloud </span>
    </p>











    <p style="letter-spacing: 0.1em;" class="is-uppercase">
      Website Designed By
      <a
        href="https://jstnlt.my.id"
        class="blurple has-text-weight-bold"
        target="_blank"
        >JstnLT</a
      >.<br>The Original Website Design is Open Source on <a
        href="https://github.com/JastinXyz/discord-bot-landing-page-web"
        class="blurple has-text-weight-bold"
        target="_blank"
        >Github</a
      >
    </p>
  </div>
</footer>
<!-- Footer Section End -->

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>
<script src="/assets/js/script.js"></script>








<!-- Tela de carregamento -->
<div id="loader">
  <div class="loader-content">
    <img src="/assets/img/Braix_Loading.gif" alt="Carregando" class="loader-gif">
    <span class="title msgbrix has-text-weight-bold">Carregando...</span>

  </div>
</div>


<script>
  // Remove o loader quando a p√°gina terminar de carregar
  window.addEventListener("load", () => {
    const loader = document.getElementById("loader");
    if (loader) {
      loader.style.opacity = "0";
      setTimeout(() => loader.remove(), 300); // esconde suavemente
    }
  });
</script>




</body>
</html>
